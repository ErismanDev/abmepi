{% extends 'base.html' %}
{% load static %}

{% block title %}{{ title }} - ABMEPI{% endblock %}

{% block extra_css %}
<style>
    .profile-header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 2rem 0;
        margin-bottom: 2rem;
    }
    
    .profile-avatar {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        border: 4px solid white;
        object-fit: cover;
    }
    
    .info-card {
        border: none;
        box-shadow: 0 0.125rem 0.25rem rgba(0, 0, 0, 0.075);
        transition: all 0.3s ease;
    }
    
    .info-card:hover {
        box-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.15);
        transform: translateY(-2px);
    }
    
    .info-card .card-header {
        background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
        border-bottom: 1px solid #dee2e6;
        font-weight: 600;
    }
    
    .status-badge {
        font-size: 0.875rem;
        padding: 0.5rem 1rem;
    }
    
    .contact-info i {
        width: 20px;
        color: #6c757d;
    }
</style>
{% endblock %}

{% block content %}
<!-- Cabeçalho do Perfil -->
<div class="profile-header">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-md-3 text-center">
                {% if associado.foto %}
                    <img src="{{ associado.foto.url }}" alt="Foto do Associado" class="profile-avatar">
                {% else %}
                    <div class="profile-avatar d-flex align-items-center justify-content-center bg-light text-dark">
                        <i class="fas fa-user fa-3x"></i>
                    </div>
                {% endif %}
            </div>
            <div class="col-md-9">
                <h1 class="mb-2">{{ associado.nome }}</h1>
                <p class="mb-1">
                    <i class="fas fa-id-card me-2"></i>
                    CPF: {{ associado.cpf }}
                </p>
                <p class="mb-1">
                    <i class="fas fa-calendar me-2"></i>
                    Data de Nascimento: {{ associado.data_nascimento|date:"d/m/Y" }}
                </p>
                <p class="mb-0">
                    <i class="fas fa-map-marker-alt me-2"></i>
                    {{ associado.cidade }}/{{ associado.estado }}
                </p>
            </div>
        </div>
    </div>
</div>

<div class="container">
    <div class="row">
        <!-- Informações Pessoais -->
        <div class="col-md-6 mb-4">
            <div class="card info-card h-100">
                <div class="card-header">
                    <i class="fas fa-user me-2"></i>
                    Informações Pessoais
                </div>
                <div class="card-body">
                    <div class="row mb-3">
                        <div class="col-6">
                            <strong>RG:</strong><br>
                            <span class="text-muted">{{ associado.rg }}</span>
                        </div>
                        <div class="col-6">
                            <strong>Sexo:</strong><br>
                            <span class="text-muted">{{ associado.get_sexo_display }}</span>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-6">
                            <strong>Estado Civil:</strong><br>
                            <span class="text-muted">{{ associado.get_estado_civil_display }}</span>
                        </div>
                        <div class="col-6">
                            <strong>Naturalidade:</strong><br>
                            <span class="text-muted">{{ associado.naturalidade|default:"Não informado" }}</span>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-6">
                            <strong>Nacionalidade:</strong><br>
                            <span class="text-muted">{{ associado.nacionalidade }}</span>
                        </div>
                        <div class="col-6">
                            <strong>Idade:</strong><br>
                            <span class="text-muted">{{ associado.get_idade }} anos</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Informações de Contato -->
        <div class="col-md-6 mb-4">
            <div class="card info-card h-100">
                <div class="card-header">
                    <i class="fas fa-address-book me-2"></i>
                    Informações de Contato
                </div>
                <div class="card-body">
                    <div class="contact-info mb-3">
                        <i class="fas fa-envelope me-2"></i>
                        <strong>E-mail:</strong> {{ associado.email|default:"Não informado" }}
                    </div>
                    <div class="contact-info mb-3">
                        <i class="fas fa-phone me-2"></i>
                        <strong>Telefone:</strong> {{ associado.telefone|default:"Não informado" }}
                    </div>
                    <div class="contact-info mb-3">
                        <i class="fas fa-mobile-alt me-2"></i>
                        <strong>Celular:</strong> {{ associado.celular }}
                    </div>
                    <div class="contact-info">
                        <i class="fas fa-map-marker-alt me-2"></i>
                        <strong>Endereço:</strong><br>
                        <span class="text-muted">{{ associado.get_endereco_completo }}</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Informações Militares -->
        <div class="col-md-6 mb-4">
            <div class="card info-card h-100">
                <div class="card-header">
                    <i class="fas fa-shield-alt me-2"></i>
                    Informações Militares
                </div>
                <div class="card-body">
                    <div class="row mb-3">
                        <div class="col-6">
                            <strong>Matrícula Militar:</strong><br>
                            <span class="text-muted">{{ associado.matricula_militar|default:"Não informado" }}</span>
                        </div>
                        <div class="col-6">
                            <strong>Posto/Graduação:</strong><br>
                            <span class="text-muted">{{ associado.get_posto_graduacao_display|default:"Não informado" }}</span>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-6">
                            <strong>Órgão:</strong><br>
                            <span class="text-muted">{{ associado.orgao|default:"Não informado" }}</span>
                        </div>
                        <div class="col-6">
                            <strong>Situação:</strong><br>
                            <span class="badge status-badge {% if associado.situacao == 'ativo' %}bg-success{% elif associado.situacao == 'inativo' %}bg-danger{% else %}bg-warning{% endif %}">
                                {{ associado.get_situacao_display }}
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Status do Sistema -->
        <div class="col-md-6 mb-4">
            <div class="card info-card h-100">
                <div class="card-header">
                    <i class="fas fa-cog me-2"></i>
                    Status do Sistema
                </div>
                <div class="card-body">
                    <div class="row mb-3">
                        <div class="col-6">
                            <strong>Status:</strong><br>
                            <span class="badge status-badge {% if associado.ativo %}bg-success{% else %}bg-danger{% endif %}">
                                {% if associado.ativo %}Ativo{% else %}Inativo{% endif %}
                            </span>
                        </div>
                        <div class="col-6">
                            <strong>Data de Cadastro:</strong><br>
                            <span class="text-muted">{{ associado.data_cadastro|date:"d/m/Y" }}</span>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-6">
                            <strong>Última Atualização:</strong><br>
                            <span class="text-muted">{{ associado.data_atualizacao|date:"d/m/Y H:i" }}</span>
                        </div>
                        <div class="col-6">
                            <strong>Usuário do Sistema:</strong><br>
                            <span class="text-muted">{{ associado.usuario.username|default:"Não criado" }}</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Botões de Ação -->
    <div class="row mb-4">
        <div class="col-12 text-center">
            <a href="{% url 'core:perfil' %}" class="btn btn-primary me-2">
                <i class="fas fa-edit me-2"></i>
                Editar Perfil
            </a>
            <a href="{% url 'associados:meus_atendimentos_juridicos' %}" class="btn btn-info me-2">
                <i class="fas fa-gavel me-2"></i>
                Meus Atendimentos Jurídicos
            </a>
            <a href="{% url 'associados:meus_atendimentos_psicologicos' %}" class="btn btn-success me-2">
                <i class="fas fa-brain me-2"></i>
                Meus Atendimentos Psicológicos
            </a>
            <a href="{% url 'associados:minhas_reservas_hotel' %}" class="btn btn-warning">
                <i class="fas fa-bed me-2"></i>
                Minhas Reservas
            </a>
        </div>
    </div>
</div>
{% endblock %}
