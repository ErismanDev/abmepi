<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Teste Formulário Simples</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <style>
        body { padding: 20px; }
        .test-container { max-width: 600px; margin: 0 auto; }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>Teste de Formulário Simples</h1>
        
        <div class="card">
            <div class="card-body">
                <h5>Teste de Campo Select</h5>
                
                <!-- Teste 1: Select simples -->
                <div class="mb-3">
                    <label class="form-label">Teste Select Simples:</label>
                    <select class="form-control form-select">
                        <option value="">---------</option>
                        <option value="AC">Acre</option>
                        <option value="SP">São Paulo</option>
                        <option value="RJ">Rio de Janeiro</option>
                    </select>
                </div>
                
                <!-- Teste 2: Select com choices hardcoded -->
                <div class="mb-3">
                    <label class="form-label">Teste Select com Choices:</label>
                    <select class="form-control form-select" id="testSelect">
                        <option value="">---------</option>
                    </select>
                </div>
                
                <!-- Botões de teste -->
                <div class="mb-3">
                    <button type="button" class="btn btn-primary" onclick="testSelect()">
                        Testar Select
                    </button>
                    <button type="button" class="btn btn-info" onclick="loadForm()">
                        Carregar Formulário Django
                    </button>
                </div>
                
                <!-- Resultado -->
                <div id="result" class="mt-3"></div>
            </div>
        </div>
    </div>
    
    <script>
        // Função para testar select
        function testSelect() {
            const select = document.getElementById('testSelect');
            const choices = [
                ['', '---------'],
                ['AC', 'Acre'],
                ['AL', 'Alagoas'],
                ['AP', 'Amapá'],
                ['AM', 'Amazonas'],
                ['BA', 'Bahia'],
                ['CE', 'Ceará'],
                ['DF', 'Distrito Federal'],
                ['ES', 'Espírito Santo'],
                ['GO', 'Goiás'],
                ['MA', 'Maranhão'],
                ['MT', 'Mato Grosso'],
                ['MS', 'Mato Grosso do Sul'],
                ['MG', 'Minas Gerais'],
                ['PA', 'Pará'],
                ['PB', 'Paraíba'],
                ['PR', 'Paraná'],
                ['PE', 'Pernambuco'],
                ['PI', 'Piauí'],
                ['RJ', 'Rio de Janeiro'],
                ['RN', 'Rio Grande do Norte'],
                ['RS', 'Rio Grande do Sul'],
                ['RO', 'Rondônia'],
                ['RR', 'Roraima'],
                ['SC', 'Santa Catarina'],
                ['SP', 'São Paulo'],
                ['SE', 'Sergipe'],
                ['TO', 'Tocantins']
            ];
            
            // Limpar opções existentes
            select.innerHTML = '';
            
            // Adicionar novas opções
            choices.forEach(([value, label]) => {
                const option = document.createElement('option');
                option.value = value;
                option.textContent = label;
                select.appendChild(option);
            });
            
            document.getElementById('result').innerHTML = 
                '<div class="alert alert-success">Select populado com ' + choices.length + ' opções!</div>';
        }
        
        // Função para carregar formulário Django
        async function loadForm() {
            try {
                document.getElementById('result').innerHTML = 
                    '<div class="alert alert-info">Carregando formulário...</div>';
                
                const response = await fetch('/assejus/advogados/modal/novo/');
                if (response.ok) {
                    const data = await response.json();
                    if (data.form_html) {
                        document.getElementById('result').innerHTML = 
                            '<div class="alert alert-success">Formulário carregado com sucesso!</div>' +
                            '<div class="border p-3 mt-3">' + data.form_html + '</div>';
                    } else {
                        document.getElementById('result').innerHTML = 
                            '<div class="alert alert-warning">Formulário carregado mas sem HTML</div>';
                    }
                } else {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
            } catch (error) {
                document.getElementById('result').innerHTML = 
                    '<div class="alert alert-danger">Erro ao carregar formulário: ' + error.message + '</div>';
            }
        }
        
        // Inicializar
        document.addEventListener('DOMContentLoaded', function() {
            console.log('✅ Página de teste carregada');
        });
    </script>
</body>
</html>
